{% extends "scorelib/base.html" %}
{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-4">
            <div class="card shadow">
                <div class="card-body">
                    <h3 class="text-center mb-4">Orchester Login</h3>
                    <form method="post">
                        {% csrf_token %}
                        {{ form.as_p }}
                        <button type="submit" class="btn btn-primary w-100">Anmelden</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 1. Find the password input field
        const passwordField = document.querySelector('input[type="password"]');
        
        if (passwordField) {
            // 2. Create the eye icon (using an emoji for simplicity)
            const toggleSpan = document.createElement('span');
            toggleSpan.innerHTML = 'üëÅÔ∏è';
            toggleSpan.style.cssText = `
                cursor: pointer;
                margin-left: -30px;
                position: relative;
                z-index: 2;
                user-select: none;
            `;

            // 3. Add the eye icon right after the password field
            passwordField.parentNode.insertBefore(toggleSpan, passwordField.nextSibling);

            // 4. Click event to toggle password visibility
            toggleSpan.addEventListener('click', function() {
                const isPassword = passwordField.getAttribute('type') === 'password';
                passwordField.setAttribute('type', isPassword ? 'text' : 'password');
                this.innerHTML = isPassword ? 'üôà' : 'üëÅÔ∏è';
            });

            // 5. Add some padding to the right of the password field to prevent overlap
            passwordField.style.paddingRight = '30px';
        }
    });
</script>
{% endblock %}